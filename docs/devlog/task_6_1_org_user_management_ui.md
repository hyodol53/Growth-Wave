
# Task 6.1: 조직/인원 관리 UI 개발

`WORK_PLAN.md`의 **Task 6.1** 요구사항에 따라, 관리자가 조직과 사용자를 관리할 수 있는 프론트엔드 UI의 기반을 개발했습니다.

## 1. UI 라이브러리 도입 (MUI)

- 기존 프로젝트에 별도의 UI 라이브러리가 없어, 일관되고 효율적인 개발을 위해 **MUI(Material-UI)** 를 도입하기로 결정하고 관련 패키지(`@mui/material`, `@mui/x-data-grid`)를 설치했습니다.

## 2. 관리자 전용 페이지 접근 제어

- **`AdminRoute.tsx` 컴포넌트 생성**: 관리자(`admin`) 역할의 사용자만 접근할 수 있는 페이지를 보호하기 위한 `AdminRoute` 래퍼 컴포넌트를 구현했습니다. 이 컴포넌트는 내부적으로 `auth.getCurrentUser()`를 호출하여 사용자의 역할을 확인합니다.
- **라우터 적용**: `App.tsx`의 라우팅 설정에 `/admin/organizations` 경로를 추가하고, `AdminRoute` 컴포넌트로 감싸서 관리자만 접근할 수 있도록 설정했습니다.

## 3. 공통 레이아웃 개선

- **`Layout.tsx` 리팩토링**: 기존의 HTML 태그 기반 레이아웃을 MUI의 `AppBar`, `Drawer`, `List` 등 모던한 컴포넌트를 사용하여 전면 재작성했습니다.
- **동적 네비게이션 메뉴**: 사용자의 역할이 `admin`일 경우에만 사이드바에 'Admin' 섹션과 'Organization' 메뉴가 나타나도록 조건부 렌더링 로직을 구현했습니다.

## 4. 조직/인원 관리 페이지 UI 구현

- **페이지 및 스키마 생성**: 
    - `pages/Admin/OrganizationManagementPage.tsx` 파일을 생성하여 관리 페이지의 기본 구조를 잡았습니다.
    - 백엔드 스키마에 맞춰 `schemas/user.ts`, `schemas/organization.ts` 파일을 생성하여 데이터 타입을 정의했습니다.
- **API 연동**: `services/api.ts`에 `getOrganizations`, `getUsers` 함수를 추가하고, 페이지 로딩 시 `Promise.all`을 통해 조직과 사용자 데이터를 병렬로 가져오도록 구현했습니다.
- **UI 구현**:
    - **조직도**: MUI의 `TreeView` 컴포넌트를 사용하여 계층적인 조직도를 시각적으로 표시했습니다.
    - **사용자 목록**: MUI의 `DataGrid` 컴포넌트를 사용하여 사용자 목록을 테이블 형태로 표시했습니다.
    - **상호작용**: `TreeView`에서 특정 조직을 선택하면, `DataGrid`에 해당 조직의 사용자만 필터링되어 표시되는 기능을 구현했습니다.

## 다음 단계

현재는 데이터 조회만 가능하며, 다음 단계에서는 조직과 사용자를 실제로 생성, 수정, 삭제하는 기능을 모달(Dialog) 형태로 구현할 예정입니다.

## 2. 조직 및 사용자 CUD 기능 구현

- **API 연동**: `services/api.ts`에 조직과 사용자의 생성(Create), 수정(Update), 삭제(Delete)를 위한 API 함수(`createOrganization`, `updateUser` 등)를 추가했습니다.
- **다이얼로그 컴포넌트 생성**:
    - `components/Admin/OrganizationDialog.tsx`: 조직의 이름, 레벨, 상위 조직을 입력받는 폼을 포함한 재사용 가능한 다이얼로그 컴포넌트를 생성했습니다.
    - `components/Admin/UserDialog.tsx`: 사용자의 이메일, 이름, 역할, 소속 조직 등을 입력받는 폼을 포함한 다이얼로그 컴포넌트를 생성했습니다.
- **CUD 로직 통합**:
    - `OrganizationManagementPage.tsx`에 다이얼로그의 상태를 관리하는 로직을 추가했습니다.
    - '추가', '수정', '삭제' 버튼 클릭 시, 해당 다이얼로그를 열거나 확인 창을 띄우고, 작업이 완료되면 API를 호출하여 데이터를 변경하도록 구현했습니다.
    - 데이터 변경 작업(생성, 수정, 삭제)이 성공하면, 전체 데이터를 다시 불러와 화면을 자동으로 갱신하는 기능을 추가했습니다.
- **UI 개선**:
    - 조직도(TreeView)와 사용자 목록(DataGrid)의 각 항목에 '수정' 및 '삭제' 아이콘 버튼을 추가하여 직관적인 UI를 제공했습니다.

## 결론

이로써 관리자가 조직과 사용자를 조회, 생성, 수정, 삭제할 수 있는 모든 기능의 UI 개발이 완료되었습니다. Task 6.1이 성공적으로 마무리되었습니다.
