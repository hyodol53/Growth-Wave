# `POST /api/v1/evaluations/peer-evaluations/`

## 1. 개요

현재 로그인한 사용자가 특정 프로젝트의 동료들에 대한 평가를 **생성하거나 수정(UPSERT)**합니다.

## 2. 변경사항 (v3)

- **다항목 평가 도입**: 기존의 단일 `score` 필드가 7개 항목의 점수를 담는 `scores` 배열로 변경되었습니다.
- **`comment` 필드 유지**: 서술형 피드백을 남길 수 있는 `comment` 필드는 그대로 유지됩니다.
- **UPSERT 기능**: 동일한 `(project_id, evaluator_id, evaluatee_id, evaluation_period)`에 대한 평가 데이터가 이미 존재할 경우, 새로운 데이터를 생성하는 대신 기존 데이터의 `scores`와 `comment`를 덮어씁니다.

## 3. 요청

### 3.1. Headers

| Key | Value | 필수 | 설명 |
| :--- | :--- | :--- | :--- |
| `Authorization` | `Bearer <JWT_TOKEN>` | O | 사용자의 JWT Access Token |

### 3.2. Body

**Content-Type:** `application/json`

```json
{
  "evaluations": [
    {
      "project_id": 1,
      "evaluatee_id": 2,
      "scores": [15, 18, 8, 9, 7, 8, 18],
      "comment": "피드백 내용입니다."
    },
    {
      "project_id": 1,
      "evaluatee_id": 3,
      "scores": [20, 20, 10, 10, 10, 10, 20],
      "comment": "수정된 피드백입니다."
    }
  ]
}
```

**`scores` 배열 항목 설명**

`scores` 배열은 아래 7개 평가 항목의 점수를 **반드시 순서대로** 포함해야 합니다.

| 인덱스 | 항목명 | 만점 |
| :--- | :--- | :--- |
| 0 | 본인이 맡은 업무를 기한 내 완수하였는가? | 20점 |
| 1 | 담당 업무를 정확하고 오류 없이 처리하였는가? | 20점 |
| 2 | 프로젝트에 대하여 충분히 이해하고 적절하게 업무를 처리하는가? | 10점 |
| 3 | 상대방의 의견을 경청하며, 자신의 생각을 효과적으로 전달하는가? | 10점 |
| 4 | 문제 해결을 위해 새롭거나 기발한 방식의 해결 방안을 제시하는가? | 10점 |
| 5 | 기본 윤리와 원칙에 따르며, 부당한 행동을 하지 않는가? | 10점 |
| 6 | 팀의 공동목표를 달성하기 위해 팀의 방향을 설정하고 구성원들을 동기부여/독려하는가? | 20점 |

## 4. 응답

### 4.1. 성공 (200 OK)

**Content-Type:** `application/json`

- 생성 또는 수정된 평가 데이터 객체의 리스트를 반환합니다.

### 4.2. 실패

- **400 Bad Request**:
  - 활성 평가 기간이 없는 경우
  - 제출된 평가 점수들의 합계 평균이 70점을 초과하는 경우
  - `scores` 배열의 길이가 7이 아닌 경우
  - 각 항목별 점수가 만점을 초과하는 경우
- **401 Unauthorized**: 인증 토큰이 유효하지 않은 경우
